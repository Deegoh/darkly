#!/usr/bin/env python3

import time
import requests

base = "http://10.11.249.210/.hidden"

answ = []

def req(current):
	global answ
	if (len(current) < 40):
		print(base + current)
	while True:
		try:
			aa = requests.get(base + current, headers={'Connection':'close'})
			break
		except requests.exceptions.ConnectionError:
			print('Sleep')
			time.sleep(2)
			continue


	for j in aa.content.splitlines():
		i = j.decode('utf-8')
		next = ' '
	#	print(i)
		if (i.startswith("<a ")):
			fq = i.find('"') + 1
			lq = i.find('"', fq+1)
			next = i[fq:lq]

			if (next[-1] != '/'):
				if (next != "README" or i.split(' ')[-1] != '34'):
					print(base+current, next, 'size', i.split(' ')[-1])
				answ.append([current, next, i.split(' ')[-1]])
			else:
#				print('next', next)
				req(current + next)
#				break


	#	print(i)


req('/')